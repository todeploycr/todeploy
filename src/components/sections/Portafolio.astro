---
// PortfolioSection.astro
import ameliaWebsite from "@/assets/img/amelia-website.jpg";

const projects = [
  {
    title: "Sitio web profesional para psicología clínica.",
    category: "Diseño y desarrollo de sitios web profesionales",
    description:
      "Sitio web diseñado y desarrollado para la psicóloga Amelia Reyes, enfocado en transmitir cercanía, confianza y profesionalismo. La plataforma presenta sus servicios en salud mental materna, bienestar emocional femenino y terapia de pareja, con una estructura clara, diseño cálido y una experiencia de usuario pensada para acompañar y orientar a cada paciente desde el primer contacto.",
    image: ameliaWebsite,
    tags: ["Astro", "Tailwind", "TypeScript"],
    link: "https://psicologaameliareyes.com/", // Link del proyecto
  },
];
---

<section id="portfolio" class="border-b-0 relative py-16 sm:py-20 md:py-24 lg:py-32 overflow-hidden bg-white/3">
  <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section header - Responsive -->
    <div class="text-center mb-12 sm:mb-14 md:mb-16 section-header">
      <span class="text-[#00D6A1] font-medium text-xs sm:text-sm uppercase tracking-wider"
        >NUESTRO TRABAJO</span
      >
      <h2
        class="font-heading text-2xl xs:text-3xl sm:text-4xl lg:text-5xl font-bold mt-2 sm:mt-3 mb-4 sm:mb-6 text-white px-4 sm:px-0"
      >
        Portfolio de <span class="text-[#00D6A1] block xs:inline mt-1 xs:mt-0">Proyectos</span>
      </h2>
      <p class="text-gray-400 max-w-2xl mx-auto text-base sm:text-lg px-4 sm:px-6 lg:px-0 leading-relaxed">
        Descubre algunos de los proyectos que hemos desarrollado para nuestros
        clientes.
      </p>
    </div>

    <!-- Projects grid - Responsive -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 sm:gap-8 mb-12 sm:mb-16 md:mb-20">
      {
        projects.map((project, index) => (
          <div
            class="group project-card"
            style={`animation-delay: ${index * 0.1}s`}
          >
            <div class="relative project-card-inner bg-[#0a0b1a] backdrop-blur-xl border border-white/10 rounded-xl sm:rounded-2xl overflow-hidden transition-all duration-400 hover:shadow-[0_20px_40px_rgba(0,214,161,0.15)]">
              <!-- Glow effect on hover -->
              <div class="absolute inset-0 rounded-xl sm:rounded-2xl bg-linear-to-r from-[#00D6A1]/0 via-[#00D6A1]/0 to-[#00D6A1]/0 opacity-0 group-hover:from-[#00D6A1]/20 group-hover:via-[#00D6A1]/40 group-hover:to-[#00D6A1]/20 group-hover:opacity-40 transition-all duration-500 blur-xl pointer-events-none" />
              
              <!-- Border glow -->
              <div class="absolute inset-0 rounded-xl sm:rounded-2xl border-2 border-transparent group-hover:border-[#00D6A1]/80 transition-all duration-500 glow-border pointer-events-none" />

              <div class="relative z-10">
                <!-- Image - Responsive height -->
                <div class="relative h-48 sm:h-56 md:h-64 overflow-hidden">
                  <img
                    src={project.image.src}
                    alt={project.title}
                    class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                  />
                  <div class="absolute inset-0 bg-linear-to-t from-[#0a0b1a] via-[#0a0b1a]/60 to-transparent" />

                  <!-- Overlay with "Ver Proyecto" button - Hidden on mobile -->
                  <div class="hidden sm:flex absolute inset-0 items-center justify-center bg-[#0a0b1a]/80 opacity-0 group-hover:opacity-100 transition-all duration-500">
                    <a
                      href={project.link}
                      target="_blank"
                      rel="noopener noreferrer"
                      class="bg-[#00D6A1] hover:bg-[#00D6A1]/90 text-[#0a0b1a] px-4 sm:px-6 py-2 sm:py-3 rounded-lg inline-flex items-center text-xs sm:text-sm font-bold transform translate-y-4 group-hover:translate-y-0 transition-all duration-500 shadow-lg"
                    >
                      <svg
                        class="w-4 h-4 sm:w-5 sm:h-5 mr-2"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                      Ver Proyecto
                    </a>
                  </div>
                </div>

                <!-- Content - Responsive padding -->
                <div class="p-4 sm:p-5 md:p-6">
                  <span class="text-[#00D6A1] text-xs sm:text-sm font-medium">
                    {project.category}
                  </span>
                  <h3 class="font-heading text-lg sm:text-xl font-semibold mt-2 mb-2 sm:mb-3 text-white transition-colors duration-300">
                    {project.title}
                  </h3>
                  <p class="text-gray-400 text-sm leading-relaxed mb-3 sm:mb-4">
                    {project.description}
                  </p>

                  <!-- Tags - Responsive -->
                  <div class="flex flex-wrap gap-1.5 sm:gap-2">
                    {project.tags.map((tag) => (
                      <span class="px-2 sm:px-3 py-1 rounded-full bg-white/5 border border-white/10 text-[10px] sm:text-xs font-medium text-gray-400">
                        {tag}
                      </span>
                    ))}
                  </div>

                  <!-- Mobile CTA Button - Only visible on mobile -->
                  <div class="sm:hidden mt-4">
                    <a
                      href={project.link}
                      target="_blank"
                      rel="noopener noreferrer"
                      class="w-full bg-[#00D6A1] hover:bg-[#00D6A1]/90 text-[#0a0b1a] px-4 py-2.5 rounded-lg inline-flex items-center justify-center text-sm font-bold transition-all duration-300 shadow-lg active:scale-95"
                    >
                      <svg
                        class="w-4 h-4 mr-2"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                      Ver Proyecto
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  // Intersection observer for scroll animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: "0px 0px -50px 0px",
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("animate-in");
      }
    });
  }, observerOptions);

  const sectionHeader = document.querySelector(".section-header");
  const projectCards = document.querySelectorAll(".project-card");
  const clientsSection = document.querySelector(".clients-section");
  const ctaSection = document.querySelector(".cta-section");

  if (sectionHeader) observer.observe(sectionHeader);
  projectCards.forEach((card) => observer.observe(card));
  if (clientsSection) observer.observe(clientsSection);
  if (ctaSection) observer.observe(ctaSection);
</script>

<style>
  /* Starfield background */
  .starfield {
    background-image: 
      radial-gradient(2px 2px at 20px 30px, white, transparent),
      radial-gradient(2px 2px at 60px 70px, white, transparent),
      radial-gradient(1px 1px at 50px 50px, white, transparent),
      radial-gradient(1px 1px at 130px 80px, white, transparent),
      radial-gradient(2px 2px at 90px 10px, white, transparent);
    background-size: 200px 200px;
    background-position: 0 0, 40px 60px, 130px 270px, 70px 100px, 150px 50px;
    animation: stars 120s linear infinite;
  }

  .starfield::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
      radial-gradient(1px 1px at 40px 60px, white, transparent),
      radial-gradient(1px 1px at 110px 90px, white, transparent),
      radial-gradient(1px 1px at 175px 30px, white, transparent),
      radial-gradient(2px 2px at 70px 150px, white, transparent);
    background-size: 250px 250px;
    background-position: 0 0, 60px 80px, 140px 220px, 90px 120px;
    opacity: 0.5;
    animation: stars 180s linear infinite;
  }

  @keyframes stars {
    from {
      transform: translateY(0);
    }
    to {
      transform: translateY(-200px);
    }
  }

  /* Glowing border effect */
  .glow-border {
    box-shadow: 0 0 0px rgba(0, 214, 161, 0);
    transition: box-shadow 0.5s ease-in-out;
  }

  /* Desktop only hover effects */
  @media (min-width: 640px) {
    .group:hover .glow-border {
      box-shadow: 
        0 0 20px rgba(0, 214, 161, 0.5),
        0 0 40px rgba(0, 214, 161, 0.3),
        0 0 60px rgba(0, 214, 161, 0.1),
        inset 0 0 20px rgba(0, 214, 161, 0.1);
    }

    .group:hover .project-card-inner {
      transform: translateY(-5px);
    }
  }

  /* Card hover effects */
  .project-card-inner {
    transform: translateY(0);
  }

  /* Section header animation */
  .section-header {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .section-header.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* Project cards animation */
  .project-card {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }

  .project-card.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* Clients section animation */
  .clients-section {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .clients-section.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* CTA section animation */
  .cta-section {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out 0.2s, transform 0.6s ease-out 0.2s;
  }

  .cta-section.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* Marquee animation */
  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .animate-marquee {
    animation: marquee 30s linear infinite;
  }

  .animate-marquee:hover {
    animation-play-state: paused;
  }

  /* Mobile optimizations */
  @media (max-width: 640px) {
    .project-card {
      transform: translateY(20px);
    }
    
    /* Faster animations on mobile */
    .project-card.animate-in {
      transition: opacity 0.4s ease-out, transform 0.4s ease-out;
    }
  }

  /* Touch devices - prevent hover stuck state */
  @media (hover: none) {
    .group:hover .glow-border {
      box-shadow: 0 0 0px rgba(0, 214, 161, 0);
    }
    
    .group:active .project-card-inner {
      transform: scale(0.98);
    }
  }

  /* Prevent text selection on rapid taps */
  @media (max-width: 640px) {
    .project-card {
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }
  }
</style>